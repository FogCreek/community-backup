- MAX_CATEOGIES_LISTED = 3
- MAX_PROJECTS_PER_CATEGORY = 3

include includes/head

body
  include includes/header
  main(role="main")


    if user.isExisting
      section.profile
        header.category.my-projects
          // TODO: update link to "/@#{user.name}" profile page
          a.category-name(href="#")
            h2 Your Projects →
          .recent-projects
            // if signed in user
              .avatar(background-image=user.avatarImage)
            .avatar.anon-avatar
            button.button-small.button-secondary New Project ✨
            // if signed in user
              // each project in recentProjects (max 3)
            // else
              // last project in recentProjects (1)
              // and gh signup cta box
    // TODO --|>
    include includes/your-projects

    include includes/featured

    each category, index in shuffledCategories
      if index < MAX_CATEOGIES_LISTED

        article.projects(style="background-color: #{category.background}")
          header.category
            a.category-name(href="#{category.url}")
              h2=category.name
                span.arrow →
            span.category-image-container
              a.category-image(href="#{category.url}")
                img(src=category.img)
            p.category-description=category.description

          ul.projects-container
            - matchingProjects = 0
            each project in projects
              if project.categoryId == category.id
                if matchingProjects < MAX_PROJECTS_PER_CATEGORY
                  include includes/project
                  - matchingProjects ++

    include includes/categories-list

    include includes/by-fogcreek

  include includes/footer
  include includes/overlay
  include includes/video-overlay
  include includes/scripts
